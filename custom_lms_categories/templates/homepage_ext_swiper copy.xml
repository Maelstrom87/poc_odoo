<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Eredita dal template principale dei corsi -->
    <template id="inherit_courses_home" inherit_id="website_slides.courses_home" name="Courses Home with Categories Sliders">
        <xpath expr="//div[hasclass('o_wslides_home_main')]" position="before">
            <div class="container mt-4 mb-4">
                <h2 class="text-center mb-4">Browse by Categories</h2>
            
                <!-- Toolbar Categories List -->
                <div class="row">
                    <t t-foreach="website.env['lms.category'].search([])" t-as="category">
                        <div class="col-md-3 mb16">
                            <div class="card category-card h-100">
                                <div class="card-body">
                                    <h5>
                                        <a t-att-href="'/categories/' + str(category.id)">
                                            <t t-esc="category.name"/>
                                        </a>
                                    </h5>
                                    <p class="text-muted" t-esc="category.description or ''"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            <t t-call="website.layout">

                    <!-- Categories Grid -->
                    <div class="container mt-4 mb-4">
                        <h2 class="text-center mb-4">Browse by Categories</h2>
                        <div class="row">
                            <t t-foreach="website.env['lms.category'].search([])" t-as="category">
                                <t t-call="custom_lms_categories.category_card" t-category="category"/>
                            </t>
                        </div>
                    </div>

                    <!-- Carousel Sections -->
                    <div class="carousel-wrapper bg-gray-900 py-8">
                        <div class="container mt-4 mb-4">
                            <t t-foreach="website.env['lms.category'].search([])" t-as="category">
                                <t t-if="category.channel_ids and len(category.channel_ids) > 0">
                                    <t t-call="custom_lms_categories.slider_section_swiper" t-category="category"/>
                                </t>
                            </t>
                        </div>
                    </div>

                    <!-- Video Modal -->
                    <t t-call="custom_lms_categories.modal_video"/>

                    <!-- Scripts -->
                    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
                    <t t-if="not 'jquery_loaded' in request.env">
                        <script src="/web/static/lib/jquery/jquery.js"/>
                        <t t-set="jquery_loaded" t-value="True"/>
                    </t>
                    <!-- Swiper CSS -->
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
                    <!-- Swiper JS -->
                    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"/>
                    <!-- Initialize Swiper -->
                    <script type="text/javascript">
                        $(document).ready(function() {
                            $('.swiper').each(function() {
                                new Swiper(this, {
                                    // Optional parameters
                                    direction: 'horizontal',
                                    loop: true,
                                    slidesPerView: 1,
                                    spaceBetween: 30,
                                    centeredSlides: true,
                                    autoplay: {
                                        delay: 3000,
                                        disableOnInteraction: false,
                                    },
                                    breakpoints: {
                                        // when window width is >= 640px
                                        640: {
                                            slidesPerView: 2,
                                            spaceBetween: 20
                                        },
                                        // when window width is >= 768px
                                        768: {
                                            slidesPerView: 3,
                                            spaceBetween: 30
                                        },
                                        // when window width is >= 1024px
                                        1024: {
                                            slidesPerView: 4,
                                            spaceBetween: 30
                                        }
                                    },
                                    // Navigation arrows
                                    navigation: {
                                        nextEl: '.swiper-button-next',
                                        prevEl: '.swiper-button-prev',
                                    },
                                    // Pagination
                                    pagination: {
                                        el: '.swiper-pagination',
                                        clickable: true,
                                    },
                                });
                            });
                        });
                    </script>
                </t>
          
            </div>
        </xpath>
    </template>


</odoo>